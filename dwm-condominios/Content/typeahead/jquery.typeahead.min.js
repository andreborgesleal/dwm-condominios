/**
 * jQuery Typeahead
 *
 * @author Tom Bertrand
 * @version 1.7.5 (2014-11-30)
 *
 * @copyright
 * Copyright (C) 2014 RunningCoder.
 *
 * @link
 * http://www.runningcoder.org/jquerytypeahead/
 *
 * @license
 * Licensed under the MIT license.
 *
 * @note
 * Remove debug code: //\s?\{debug\}[\s\S]*?\{/debug\}
 */
(function(n,t,i,r){var o;n.Typeahead={source:{}};typeof Object.preventExtensions!="function"&&(Object.preventExtensions=function(n){return n});var s={input:null,minLength:2,maxItem:8,dynamic:!1,delay:300,order:null,offset:!1,hint:!1,accent:!1,highlight:!0,list:!1,group:!1,groupMaxItem:!1,filter:!1,backdrop:!1,cache:!1,ttl:36e5,compression:!1,selector:{container:"typeahead-container",group:"typeahead-group",result:"typeahead-result",list:"typeahead-list",display:"typeahead-display",query:"typeahead-query",filter:"typeahead-filter",filterButton:"typeahead-filter-button",filterValue:"typeahead-filter-value",dropdown:"typeahead-dropdown",button:"typeahead-button",backdrop:"typeahead-backdrop",hint:"typeahead-hint"},display:"display",template:null,source:null,callback:{onInit:null,onResult:null,onMouseEnter:null,onMouseLeave:null,onClick:null,onSubmit:null},debug:!1},e={dynamic:[!0,!1],order:["asc","desc"],offset:[!0,!1],accent:[!0,!1],highlight:[!0,!1],cache:[!0,!1],compression:[!0,!1],debug:[!0,!1]},u=".typeahead.input",f={from:"ãàáäâẽèéëêìíïîõòóöôùúüûñç",to:"aaaaaeeeeeiiiiooooouuuunc"},h=function(r,o){function lt(){var t,u;for(t in o)if(o.hasOwnProperty(t))if(t==="source"){JSON.stringify(o[t])==="{}"&&o.debug&&n.Debug.log({node:r.selector,"function":"extendOptions()",arguments:"{options.source: "+JSON.stringify(o[t])+"}",message:"ERROR - source.group.url or source.group.data is Required"});for(u in o[t])o[t].hasOwnProperty(u)&&(o[t][u]instanceof Object&&u!=="data"||(u="group",o[t]={group:o[t]}),"data"in o[t][u]&&!o[t][u].data&&o.debug&&n.Debug.log({node:r.selector,"function":"extendOptions()",arguments:"{options.source}",message:"ERROR - source.group.data is defined but empty"}),o[t][u].url||o[t][u].data||o[t][u]instanceof Array||o.debug&&n.Debug.log({node:r.selector,"function":"extendOptions()",arguments:"{options.source}",message:"ERROR - source.group.url or source.group.data is Required"}))}else e[t]&&i.inArray(o[t],e[t])===-1&&(o.debug&&n.Debug.log({node:r.selector,"function":"extendOptions()",arguments:"{"+t+":"+JSON.stringify(o[t])+"}",message:"WARNING - Unsupported option: "+t}),delete o[t]);o.dynamic&&(o.cache=!1,o.compression=!1);o.cache&&(o.cache=function(){var t=typeof n.localStorage!="undefined";if(t)try{localStorage.setItem("typeahead","typeahead");localStorage.removeItem("typeahead")}catch(i){t=!1}return t}());o=i.extend(!0,Object.preventExtensions(i.extend(!0,{},s)),o)}function at(){k(o.callback.onInit,[r]);o.debug&&n.Debug.log({node:r.selector,"function":"delegateTypeahead()",arguments:JSON.stringify(o),message:"OK - Typeahead activated on "+r.selector});a=r.parents("."+o.selector.container);var t=["focus"+u,"input"+u,"propertychange"+u,"keydown"+u,"dynamic"+u];i("html").on("click"+u,function(){w()});a.on("click"+u,function(n){n.stopPropagation();o.filter&&a.find("."+o.selector.dropdown.replace(" ",".")).hide()});r.parents("form").on("submit",function(n){if(k(o.callback.onSubmit,[r,this,n]))return!1});r.on(t.join(" "),function(n){switch(n.type){case"keydown":n.keyCode&&~[9,13,27,38,39,40].indexOf(n.keyCode)&&vt(n);break;case"focus":d===null&&(o.dynamic||ht());break;case"input":case"propertychange":if(!d){o.dynamic&&(l=i(this).val().trim(),dt(function(){l.length>=o.minLength&&l!==""&&ht()},o.delay));return}case"dynamic":default:l=i(this).val().trim();w();l.length>=o.minLength&&l!==""&&(ot(),st());n.type==="dynamic"&&o.dynamic&&(d=!1,ft=0)}})}function ot(){var i,a,t,v;if(l==="")return!1;p&&!o.source[p]&&(p=!1);var u,s=l,y=0,f=/\d/.test(o.groupMaxItem)&&o.groupMaxItem,e;o.accent&&(s=rt(l));for(t in h)if(h.hasOwnProperty(t)&&(!p||t===p)){f&&(e=0);for(i in h[t])if(h[t].hasOwnProperty(i)){if((c.length>=o.maxItem||f&&e>=f)&&!o.callback.onResult)break;if(h[t][i].display=o.source[t]&&o.source[t].display?h[t][i][o.source[t].display]:h[t][i][o.display],u=h[t][i].display.toString(),!u){o.debug&&n.Debug.log({node:r.selector,"function":"search()",arguments:'{display: "'+o.display+'"}',message:'WARNING - unable to find display: "'+o.display+'" inside '+JSON.stringify(h[t][i])});continue}if(o.accent&&(u=rt(u)),u.toLowerCase().indexOf(s.toLowerCase())!==-1&&(!o.offset||u.toLowerCase().indexOf(s.toLowerCase())===0)){if(o.source[t].ignore&&~o.source[t].ignore.indexOf(u))continue;if(y++,o.callback.onResult&&(c.length>=o.maxItem||f&&e>=f))continue;h[t][i].group=t;c.push(h[t][i]);f&&e++}}}if(n.Debug.print(),o.order&&c.sort(bt("display",o.order==="asc",function(n){return n.toString().toUpperCase()})),o.group){a=[];for(t in h)for(v in c)c[v].group===t&&a.push(c[v]);c=a}return k(o.callback.onResult,[r,l,c,y]),!0}function st(){var f,t,u,n;if(l===""||c.length===0)return!1;if(f=i("<div/>",{"class":o.selector.result,html:i("<ul/>",{"class":o.selector.list,html:function(){for(var n in c)c.hasOwnProperty(n)&&function(n,t){typeof n.display!="string"&&(n.display+="");var u,s,a,v,f,b,e,y,h,c,p;o.group&&(u=n.group,typeof o.group!="boolean"&&n[o.group]&&(u=n[o.group]));o.list&&(s=n.group,typeof o.list!="boolean"&&n[o.list]&&(s=n[o.list]));o.group&&!i(t).find('li[data-search-group="'+u+'"]')[0]&&i(t).append(i("<li/>",{"class":o.selector.group,html:i("<a/>",{html:u}),"data-search-group":u}));f=n.display.toLowerCase();e=l.toLowerCase();o.accent&&(f=rt(f),e=rt(e));y=f.indexOf(e);h=n.display.substr(y,e.length);o.highlight&&(h="<strong>"+h+"<\/strong>");f=kt(n.display,y,e.length,h);a=i("<li/>",{html:i("<a/>",{href:"javascript:;","data-group":u,html:function(){p=n.group&&o.source[n.group].template||o.template;p?(b=o.source[n.group]&&o.source[n.group].display||o.display,v=p.replace(/\{\{([a-z0-9_\-]+)\}\}/gi,function(t,i){return i===b?f:n[i]||"null"})):v='<span class="'+o.selector.display+'">'+f+"<\/span>"+(s?"<small>"+s+"<\/small>":"");i(this).append(v)},click:({result:n},function(t){t.preventDefault();l=n.display;r.val(l).focus();w();k(o.callback.onClick,[r,this,n,t])}),mouseenter:function(t){i(this).parent().siblings("li.active").removeClass("active");i(this).parent().addClass("active");k(o.callback.onMouseEnter,[r,this,n,t])},mouseleave:function(t){i(this).parent().removeClass("active");k(o.callback.onMouseLeave,[r,this,n,t])}})});o.group?(c=i(t).find('a[data-group="'+u+'"]:last').closest("li"),c[0]||(c=i(t).find('li[data-search-group="'+u+'"]')),i(a).insertAfter(c)):i(t).append(a)}(c[n],this)}})}),a.addClass("result").append(f),o.backdrop&&(y.container?y.container.show():(y.css=i.extend({opacity:.6,filter:"alpha(opacity=60)",position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":1040,"background-color":"#000"},o.backdrop),y.container=i("<div/>",{"class":o.selector.backdrop,css:y.css,click:function(){w()}}).insertAfter(a)),a.addClass("backdrop").css({"z-index":y.css["z-index"]+1,position:"relative"})),o.hint){v.container||(v.css=i.extend({"border-color":"transparent",position:"absolute","z-index":1,"-webkit-text-fill-color":"silver",color:"silver","background-color":"transparent","user-select":"none","box-shadow":"none"},o.hint),v.container=r.clone(!0).attr({"class":o.selector.hint,readonly:!0,tabindex:-1}).removeAttr("id placeholder name").css(v.css).insertBefore(r),r.css({position:"relative","z-index":2,"background-color":"transparent"}).parent().css({position:"relative"}));u=typeof o.group=="string"&&c[0][o.group]||c[0].group;for(n in c)if(c.hasOwnProperty(n)){if(c[n].group!==u)if(t)break;else u=c[n].group;if(c[n].display.toLowerCase().indexOf(l.toLowerCase())===0){t=c[n].display;break}}t&&v.container.val(l+t.substring(l.length)).show()}return!0}function vt(n){var t,u,f;if(c.length===0&&n.keyCode!==13)return!1;if(t=a.find("."+o.selector.result).find("li:not([data-search-group])"),u=t.siblings(".active"),n.keyCode===13)t.filter(".active")[0]&&(n.preventDefault(),n.stopPropagation(),t.filter(".active").find("a").click()),w();else{if(n.preventDefault(),t.length>1&&u.removeClass("active"),n.keyCode===40)u[0]?u.next().addClass("active"):i(t[0]).toggleClass("active");else if(n.keyCode===38)u[0]?u.prev().addClass("active"):i(t[c.length-1]).toggleClass("active");else if(n.keyCode===39)return o.hint&&!u[0]&&r.val(v.container.val()),u[0]?u.find("a").click():t.filter(".active").find("a").click(),l=r.val(),w(),!0;o.group&&(f=t.siblings(".active"),f.attr("data-search-group")&&(f.removeClass("active"),n.keyCode===40?f.next().addClass("active"):n.keyCode===38&&f.prev().addClass("active")))}return o.hint&&(t.filter(".active")[0]?v.container.hide():v.container.show()),r.val(t.filter(".active").find("."+o.selector.display).text()||l),!0}function w(){c=[];o.filter&&a.removeClass("filter").find("."+o.selector.dropdown.replace(" ",".")).hide();o.hint&&(a.removeClass("hint"),v.container&&v.container.val(""));(o.backdrop||l==="")&&(a.removeClass("backdrop").removeAttr("style"),y.container&&y.container.hide());a.removeClass("result").find("."+o.selector.result).remove();k(o.callback.onResult,[r,"",[],0])}function ht(){var p,e,t,s,a,c,y;if(d=!1,tt=(new Date).getTime(),et===0)for(p in o.source)o.source.hasOwnProperty(p)&&++et;for(t in o.source)if(o.source.hasOwnProperty(t)){if(!o.dynamic&&h[t]&&h[t].length!==0){b();continue}if(o.cache&&(h[t]=localStorage.getItem(r.selector+":"+t),h[t]&&(o.compression&&(h[t]=ti(h[t])),e=JSON.parse(h[t]),e&&e.data&&e.ttl&&e.ttl>(new Date).getTime()))){o.debug&&n.Debug.log({node:r.selector,"function":"generate()",arguments:"{cache: true}",message:"OK - List: "+r.selector+":"+t+'" found in localStorage.'});n.Debug.print();h[t]=e.data;b();continue}if(o.source[t].data||o.source[t].url||(typeof o.source[t]=="string"||o.source[t]instanceof Array?o.source[t]={url:o.source[t]}:(o.debug&&n.Debug.log({node:r.selector,"function":"generate()",arguments:"{source: undefined}",message:'ERROR - Source for group "'+t+'" is undefined.'}),n.Debug.print())),h[t]=[],o.source[t].data&&o.source[t].data instanceof Array){for(s in o.source[t].data)if(o.source[t].data.hasOwnProperty(s)){if(o.source[t].data[s]instanceof Object)break;a={};a[o.display]=o.source[t].data[s];o.source[t].data[s]=a}if(h[t]=h[t].concat(o.source[t].data),!o.source[t].url){ct(t);b();continue}}if(o.source[t].url){var u=o.source[t].url instanceof Array&&o.source[t].url[0]||o.source[t].url,v=o.source[t].url instanceof Array&&o.source[t].url[1]||null,f={};if(typeof u=="object"&&(f=i.extend(!0,{},u),u=JSON.stringify(u)),c=g.get(u),!/https?:\/\//.test(u)||~u.indexOf(n.location.host)||!~u.indexOf("{callback}")){if(typeof c=="undefined")g.set(u,[]);else if(c instanceof Array&&c.length===0){g.queue(u,t,v);continue}else{it(c,t,v);b();continue}if(f&&f.data)for(y in f.data)if(f.data[y]==="{{query}}"){f.data[y]=l;break}i.ajax(i.extend({async:!0,url:u,dataType:"json",ajaxGroup:t,ajaxPath:v,ajaxTimestamp:tt},f)).done(function(n){if(this.ajaxTimestamp!==tt)return!1;typeof this.process=="function"&&(n=this.process(n));g.set(u,n);g.processQueue(u);it(n,this.ajaxGroup,this.ajaxPath)}).fail(function(){o.debug&&n.Debug.log({node:r.selector,"function":"generate()",arguments:"{url: "+this.url+"}",message:"ERROR - Ajax request failed."})}).complete(function(){this.ajaxTimestamp===tt&&b()})}else gt.fetch(u.replace("{callback}",encodeURIComponent(ut)),function(){})}}}function yt(){function n(n){p=n;a.find("."+o.selector.filterValue).text(p||o.filter);a.find("."+o.selector.dropdown.replace(" ",".")).hide();w();ot();st();r.focus()}if(!o.filter)return!1;i("<span/>",{"class":o.selector.filter,html:function(){i(this).append(i("<button/>",{type:"button","class":o.selector.filterButton,html:"<span class='"+o.selector.filterValue+"'>"+o.filter+"<\/span> <span class='caret'><\/span>",click:function(n){n.stopPropagation();var t=a.find("."+o.selector.dropdown.replace(" ","."));t.is(":visible")?(a.removeClass("filter"),t.hide()):(a.addClass("filter"),t.show())}}));i(this).append(i("<ul/>",{"class":o.selector.dropdown,html:function(){for(var t in o.source)o.source.hasOwnProperty(t)&&function(t,r){var u=i("<li/>",{html:i("<a/>",{href:"javascript:;",html:t,click:({i:t},function(i){i.preventDefault();n(t)})})});i(r).append(u)}(t,this);i(this).append(i("<li/>",{"class":"divider"}));i(this).append(i("<li/>",{html:i("<a/>",{href:"javascript:;",html:o.filter,click:function(t){t.preventDefault();n()}})}))}}))}}).insertAfter(a.find("."+o.selector.query))}function pt(t){if(!t||!t.group)return o.debug&&n.Debug.log({node:r.selector,"function":"populate()",message:'ERROR - Empty data or Missing {data.group} parameter"'}),n.Debug.print(),!1;var i=t.group||"group",u=o.source[i].url instanceof Array?o.source[i].url[1]:null;it(t,i,u);b()}function b(){ft++;ft===et&&(d=!0,nt=[],o.dynamic&&r.trigger("dynamic.typeahead.input"))}function wt(){if(!a[0])return o.debug&&n.Debug.log({node:r.selector,"function":"_validateHtml()",arguments:o.selector.container,message:'ERROR - Missing input parent container class: ".'+o.selector.container+'"'}),!1;i.each([o.selector.query,o.selector.button],function(t,i){a.find("."+i)[0]||o.debug&&n.Debug.log({node:r.selector,"function":"_validateHtml()",arguments:o.selector.query,message:'ERROR - Missing container with class: ".'+i+'"'})})}var l="",d=null,nt=[],h=[],c=[],p,a,y={},v={},tt=null,ut="window.Typeahead.source['"+r.selector+"'].populate",ft=0,et=0,it=function(n,t,i){var s=!0,u,f,r,e;if(i)for(u=i.split("."),f=0;f<u.length;)if(typeof n!="undefined")n=n[u[f++]];else{s=!1;break}if(s){for(r in n)if(n.hasOwnProperty(r)){if(n[r]instanceof Object)break;e={};e[o.display]=n[r];n[r]=e}h[t]=h[t].concat(n);ct(t)}},ct=function(n){if(!o.cache)return!1;var t={ttl:(new Date).getTime()+o.ttl,data:h[n]};t=JSON.stringify(t);o.compression&&(t=ni(t));localStorage.setItem(r.selector+":"+n,t)},g={_queue:[],get:function(n){return nt[n]},set:function(n,t){nt[n]=t},queue:function(n,t,i){this._queue.push({url:n,group:t,path:i})},processQueue:function(n){for(var t in this._queue)this._queue[t].url===n&&(it(nt[n],this._queue[t].group,this._queue[t].path),b(),delete this._queue[t])}},bt=function(n,t,i){var r=i?function(t){return i(t[n])}:function(t){return t[n]};return t=[-1,1][+!!t],function(n,i){return n=r(n),i=r(i),t*((n>i)-(i>n))}},rt=function(n){if(!n||typeof n!="string")return!1;n=n.toLowerCase();for(var t=0,i=f.from.length;t<i;t++)n=n.replace(new RegExp(f.from.charAt(t),"g"),f.to.charAt(t));return n},kt=function(n,t,i,r){return n.substring(0,t)+r+n.substring(t+i)},dt=function(){var n=0;return function(t,i){clearTimeout(n);n=setTimeout(t,i)}}(),k=function(t,u){var f;if(!t)return!1;if(typeof t=="function")f=t;else if(typeof t=="string"||t instanceof Array){f=n;typeof t=="string"&&(t=[t,[]]);for(var e=t[0].split("."),c=t[1],s=!0,h=0;h<e.length;)if(typeof f!="undefined")f=f[e[h++]];else{s=!1;break}if(!s||typeof f!="function")return o.debug&&n.Debug.log({node:r.selector,"function":"_executeCallback()",arguments:JSON.stringify(t),message:'WARNING - Invalid callback function"'}),!1}return f.apply(this,i.merge(c||[],u?u:[])),!0},gt={fetch:function(i,r){var f=encodeURIComponent(ut),u;n[f]=this.evalJSONP(r);i=i.replace("="+ut,"="+f);u=t.createElement("SCRIPT");u.src=i;t.getElementsByTagName("HEAD")[0].appendChild(u)},evalJSONP:function(n){return function(t){var i=!1;if(typeof t=="string")try{i=JSON.parse(t)}catch(r){}else i=JSON.parse(JSON.stringify(t));if(i)n(i);else throw"JSONP call returned invalid or empty JSON";}}},ni=function(n){for(var f={},e=(n+"").split(""),r=[],u,t=e[0],o=256,i=1;i<e.length;i++)u=e[i],f[t+u]!=null?t+=u:(r.push(t.length>1?f[t]:t.charCodeAt(0)),f[t+u]=o,o++,t=u);for(r.push(t.length>1?f[t]:t.charCodeAt(0)),i=0;i<r.length;i++)r[i]=String.fromCharCode(r[i]);return r.join("")},ti=function(n){for(var f,e={},i=(n+"").split(""),t=i[0],o=t,s=[t],h=256,r,u=1;u<i.length;u++)f=i[u].charCodeAt(0),r=f<256?i[u]:e[f]?e[f]:o+t,s.push(r),t=r.charAt(0),e[h]=o+t,h++,o=r;return s.join("")};return this.__construct=function(){lt();at();yt();wt();n.Debug&&n.Debug.print()}(),{populate:pt}};i.fn.typeahead=i.typeahead=function(n){return o.typeahead(this,n)};o={typeahead:function(t,r){if(!r||!r.source){n.Debug.log({node:t.selector,"function":"$.typeahead()",arguments:"",message:"Missing source option - Typeahead dropped"});n.Debug.print();return}if(typeof t=="function"){if(!r.input){n.Debug.log({node:t.selector,"function":"$.typeahead()",arguments:"",message:'Undefined property "options.input - Typeahead dropped'});n.Debug.print();return}if(t=i(r.input),!t[0]||t.length>1){n.Debug.log({node:t.selector,"function":"$.typeahead()",arguments:JSON.stringify(r.input),message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"});n.Debug.print();return}}else if(typeof t[0]=="undefined"||t.length>1){n.Debug.log({node:t.selector,"function":"$.typeahead()",arguments:'$("'+t.selector+'").typeahead()',message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"});n.Debug.print();return}return n.Typeahead.source[t.selector]=new h(t,r)}};n.Debug={table:{},log:function(n){if(!n.message||typeof n.message!="string")return!1;this.table[n.message]=i.extend(Object.preventExtensions({node:"","function":"",arguments:""}),n)},print:function(){if(i.isEmptyObject(this.table))return!1;console.group!==r||console.table!==r?(console.groupCollapsed("--- jQuery Typeahead Debug ---"),console.table?console.table(this.table):i.each(this.table,function(n,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()):console.log("Debug is not available on your current browser, try the most recent version of Chrome or Firefox.");this.table={}}};Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length>>>0,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1})})(window,document,window.jQuery);
//# sourceMappingURL=jquery.typeahead.min.js.map
