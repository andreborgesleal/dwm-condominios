@using DWM.Models.Repositories
@model PagedList<CondominoUnidadeViewModel>
@{
    Layout = null;
    string TipoPessoa = "PF";
}
<!-- Datatables -->
<link href="../Content/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet">

@if (Model != null)
{
    <br />
    <div class="row clearfix">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="table-responsive">
                <table id="datatable" class="table table-striped jambo_table bulk_action">
                    <thead>
                        <tr class="headings">
                            <th class="column-title">Nome </th>
                            <th class="column-title">Edificação </th>
                            <th class="column-title">Unidade </th>
                            <th class="column-title">Telefone </th>
                            <th class="column-title">E-mail </th>
                            <th class="column-title">Tipo </th>
                            <th class="column-title no-link last text-center">
                                <span class="nobr">Selecionar</span>
                            </th>
                            <th class="bulk-actions" colspan="7">
                                <a class="antoo" style="color:#fff; font-weight:500;">Bulk Actions ( <span class="action-cnt"> </span> ) <i class="fa fa-chevron-down"></i></a>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            int idx = 0;
                            int CredenciadoID = 0;
                            foreach (CondominoUnidadeViewModel value in Model.Where(info => info.Email != null && info.Email.Trim().Length > 0))
                            {
                                if (value.CredenciadoViewModel != null)
                                {
                                    CredenciadoID = value.CredenciadoViewModel.CredenciadoID;
                                }
                                else
                                {
                                    CredenciadoID = 0;
                                }
                                <tr class="even pointer" id="line_@idx">
                                    <td class="">@value.Nome</td>
                                    <td class="">@value.EdificacaoDescricao </td>
                                    <td class="">@value.UnidadeID</td>
                                    <td class="">@value.Telefone</td>
                                    <td class="">@value.Email</td>
                                    <td class="">@value.DescricaoTipoCondomino</td>
                                    <td class="text-center">
                                        <input type="checkbox" name="check_@idx" id="check_@idx" class="icheckbox_flat-green" onclick="Seleciona('@value.CondominoID', '@CredenciadoID','@value.EdificacaoID', '@value.UnidadeID','@idx', this)" />
                                    </td>
                                </tr>
                                idx++;
                            }
                        }
                    </tbody>
                </table>
            </div>
            @Html.Partial("Paginacao", Model)
        </div>
    </div>
}
else
{
    @Html.Partial("_AcessoNegadoModal")
}

<!-- Datatables -->
<script src="../Content/vendors/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../Content/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
<!-- Datatables -->
<script>
      $(document).ready(function() {
        $('#datatable').DataTable({
            "lengthMenu": [[15, 25, 50, -1], [15, 25, 50, "Todos"]],
            "language": {
                "url": "../Scripts/DataTablePtBr.txt"
            }
        });
      });
</script>
<!-- /Datatables -->

<script>
    function Seleciona(CondominoID, CredenciadoID, EdificacaoID, UnidadeID, indice, obj)
    {
        if (obj.checked == true)
            $('#line_' + indice).css('background-color', 'cornsilk');
        else
            $('#line_' + indice).css('background-color', '');

        if (indice != _indice)
        {
            $('#check_' + _indice).prop("checked", false);
            $('#line_' + _indice).css('background-color', '');
        }
        
        _indice = indice;

        _EdificacaoID = EdificacaoID;
        _UnidadeID = UnidadeID;
        _CondominoID = CondominoID;
        _CredenciadoID = CredenciadoID;
    }

    function setTotalCount(total, CondominoID, CredenciadoID, EdificacaoID, UnidadeID, indice) {
        if (total == 1)
        {
            $('#check_0').prop("checked", true);
            $('#line_' + indice).css('background-color', 'cornsilk');

            $('#checkMob_0').prop("checked", true);
            $('#lineMob_' + indice).css('background-color', 'cornsilk');

            _indice = 0;

            _EdificacaoID = EdificacaoID;
            _UnidadeID = UnidadeID;
            _CondominoID = CondominoID;
            _CredenciadoID = CredenciadoID;
        }
            
    }

</script>



