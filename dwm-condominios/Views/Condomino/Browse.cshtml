@using DWM.Models.Repositories
@model PagedList<CondominoUnidadeViewModel>
@{
    ViewBag.Title = "DWM-Condomínios";
}
<div class="container-cadastro center-margin">
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <div class="x_panel">
        <div class="x_title">
            <h2>Cadastro <small>Ao se cadastrar você concorda com os <a href="~/Account/TermoUso" class="text-info" target="_blank">Termos de Uso</a> e <a href="~/Account/Politica" class="text-info" target="_blank">Política de Privacidade</a></small></h2>
            <ul class="nav navbar-right panel_toolbox">
                <li>
                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                    <ul class="dropdown-menu" role="menu">
                        <li>
                            <a href="#">Política de privacidade</a>
                        </li>
                        <li>
                            <a href="#">Termos de Uso</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">
            @using (Ajax.BeginForm("Listparam", "Condomino", new AjaxOptions { HttpMethod = "get", UpdateTargetId = "div-condomino-pf" }, new { @role = "search", @id = "form000" }))
            {
                @Html.Partial("_alerts")
                @Html.ValidationSummary("", new { @class = "text-danger" })
                <div class="form">
                    <div class="row">
                        <div class="col-md-6 col-xs-12 col-sm-12">
                            <div class="form-group">
                                <label class="control-label">Nome</label>
                                <div class="input-group col-md-12">
                                    <input type="text" id="Nome" name="Nome" class="form-control" maxlength="40" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-xs-12 col-sm-12">
                            <div class="form-group">
                                <label class="control-label">Torre</label>
                                @Html.DropDownList("EdificacaoID", new DWM.Models.Enumeracoes.BindDropDownList().Edificacoes("Todas...", "", 3), new { @class = "form-control", @onchange = "GetSelectListOnCascade('EdificacaoID','UnidadeID', 'CondominioID')" })
                            </div>
                        </div>
                        <div class="col-md-3 col-xs-12 col-sm-12">
                            <div class="form-group">
                                <label class="control-label">Unidade</label>
                                @Html.DropDownList("UnidadeID", new DWM.Models.Enumeracoes.BindDropDownList().Unidades("Todaas...", "", 1, 3), new { @class = "form-control" })
                            </div>
                        </div>
                    </div>
                    <input type="button" class="btn btn-primary" value="Buscar" onclick="Refresh(0, getPageSize(), '@Model.action', '@Model.DivId')" />
                </div>
            }
            <div id="div-condomino-pf">
                @if (Model != null)
                {
                    @Html.Partial("ListParam", Model)
                }
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#form000').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        $('#div-condomino-pf').html(result);
                    }
                });
            }
            return false;
        });
    });
</script>
