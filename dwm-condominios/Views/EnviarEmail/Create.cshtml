@using App_Dominio.Repositories
@model DWM.Models.Repositories.EmailLogViewModel
@{
    TransacaoRepository[] t = { new TransacaoRepository(), new TransacaoRepository() };
    t[0].url = "../EnviarEmail/Create";
    t[0].nomeCurto = "Incluir";
    t[0].referencia = "";

    t[1].url = "../Home/Default";
}
<div class="container-cadastro">
    <div class="x_panel">
        @Html.EditorFor(info => Model, "FORMULARIO", new { Brand = "Enviar Email", Descricao = "Enviar Email", Transacao = t })
        <div class="x_content">
            <!-- Smart Wizard -->
            @using (Html.BeginForm("Create", "Informativo", FormMethod.Post, new { @class = "form-horizontal" }))
            {
                @*@Html.ValidationSummary("", new { @class = "text-danger" })*@
                @Html.HiddenFor(info => info.CondominioID)
                <div class="row">
                    <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Grupo/Condômino</label>
                            @Html.DropDownList("GrupoCondominoID", new DWM.Models.Enumeracoes.BindDropDownList().GrupoCondominos("Todos...", "", Model.CondominioID), new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Edificação</label>
                            @Html.DropDownList("EdificacaoID", new DWM.Models.Enumeracoes.BindDropDownList().Edificacoes("Todas...", "", Model.CondominioID), new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4 col-xs-12 col-sm-12">
                        <div class="form-group">
                            <label class="control-label">Unidades</label>
                            @Html.DropDownList("UnidadeID", new DWM.Models.Enumeracoes.BindDropDownList().Unidades("Todos...", "", Model.CondominioID), new { @class = "form-control" })
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
                        <div class="form-group">
                            <label class="control-label">Assunto</label>
                            <input type="text" class="form-control" name="Assunto" id="Assunto" value="@Model.Assunto" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-lg-12 col-xs-12">
                        <div class="form-group">
                            <label class="control-label">Mensagem</label>
                            <input type="hidden" name="Resumo" id="Resumo" value="@Model.EmailMensagem" />
                            <div id="summernote1">@Model.EmailMensagem</div>
                        </div>
                    </div>
                </div>
            }
            <!-- End SmartWizard Content -->
        </div>
    </div>
</div>


<!--Summernote-->
<script>
    $(document).ready(function () {
        $('#summernote1').summernote({
            lang: 'pt-BR',
            height: 450,
            //toolbar: [
            //   // [groupName, [list of button]]
            //   ['style', ['bold', 'italic', 'underline', 'clear']],
            //   ['font', ['strikethrough', 'superscript', 'subscript']],
            //   ['fontsize', ['fontsize']],
            //   ['color', ['color']],
            //   ['para', ['ul', 'ol', 'paragraph']],
            //   ['height', ['height']]
            //]
        });
        $('#EmailMensagem').html('@Model.EmailMensagem');
        $('#summernote1').summernote('code', $('#EmailMensagem').val());
    });

    function getEmail() {
        var _EmailTemplateID = $('#EmailTemplateID').val();
        var _CondominioID = $('#CondominioID').val();
        if (_EmailTemplateID != '' && _EmailTemplateID != '0') {
            var link = "GetNames?EmailTemplateID=" + _EmailTemplateID + "&CondominioID=" + _CondominioID;
            link = encodeURI(link + '&noCahce=' + new Date());
            $.ajax({
                type: "POST",
                url: link,
                contentType: "application/json; charset=utf-8",
                global: false,
                async: false,
                dataType: "json",
                success: function (jsonObj) {
                    $('#summernote3').summernote('code', jsonObj.EmailMensagem);
                    $('#EmailMensagem').val($('#summernote3').summernote('code'));
                }
            });
        }
    }
</script>
